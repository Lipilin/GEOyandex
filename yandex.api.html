<!DOCTYPE html>
<html>
<head>
    <title>API Yandex</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <script src="https://api-maps.yandex.ru/2.1/?apikey=API-ключ вышего сервиса&lang=ru_RU"type="text/javascript"></script>
    <script src="icon_customImage.js" type="text/javascript"></script>
	<style>
        #map {
            width: 100%; height: 100%; padding: 0; margin: 0;
        }
        html,body{
            width:400px;
            height:500px;
        }
    </style>
</head>
<body>
	<select id = "selection"> 
    <optgroup label = "Россия">
        <option value="Moscow" id = "Moscow">Москва</option>
        <option value = "SPB" id= "SPB">Санкт-Петербург</option>
    </optgroup>
</select>
<div id="map"></div>
</body>
</html>
<script type="text/javascript">
ymaps.ready(function () {
	Moscow_points=[];
	SPB_points=[];
	all_points=new Map([
	    ['Moscow',Moscow_points],
        ['SPB',SPB_points]
	    ]);//Здесь хранятся точки различных городов
	var choose = document.querySelector('#selection');
choose.addEventListener("change", function() {//при изменении <select></select> срабатывает функция
    myMap = myMap.destroy(); //уничтожаем предыдущую карту
    var choose = document.querySelector('#selection');
    var coords_db = new Map([
        ['Moscow', [55.751574, 37.573856]],
        ['SPB', [ 59.9386, 30.3141]],
    ]);//сюда добавлять координаты новых городов
    var value = choose.value;
    var coords = coords_db.get(value);
    var points=all_points.get(value);
    //рисуем вторую,третью и т.д. карты
    myMap = new ymaps.Map('map', {
        center: [coords[0],coords[1] ], //координаты
        zoom: 9, //приближение карты
        controls:[]
    });
    //создаем новын маркеры
    Placemark4 = new ymaps.Placemark(myMap.getCenter(),{
        hintContent: 'название вашей компании',
        balloonContent: 'Также название вашей компании'
    }, {
        iconLayout: 'default#image',//ти файла
        iconImageHref: 'images/myIcon.gif', //ссылка на изображение компании(для маркера)
        iconImageSize: [30, 42],//размер картинки
        iconImageOffset: [0, 3] //расположение точки относительно центра карты(т.к. в данном случае - mymap.getCenter())
    });
    SPB_points.push(Placemark4);//добавляем новую точку в коллекцию города, в который хотим их добавить(В данном случае SPB_points - Санкт Петербург, может быть Moscow_points - Москва, или другие города, созданные вами )
    for (var i=0; i<points.length;i++){
        myMap.geoObjects.add(points[i]);
    }
    myMap.controls.add(searchControl);
    });

    //создание самой первой карта
    var myMap = new ymaps.Map('map', {
        center: [55.751574,37.573856 ], //координаты
        zoom: 9, //приближение карты
        controls:[] 
    });
    //создаем метки для Москвы (или другого города,который будет первым)
    Placemark1 = new ymaps.Placemark(myMap.getCenter(), {
        hintContent: 'Кремль',
        balloonContent: 'Кремль2'
    }, {
        iconLayout: 'default#image',
        iconImageHref: 'images/myIcon.gif', //ссылка на изображение компании(для маркера)
        iconImageSize: [30, 42],//размер картинки
        iconImageOffset: [-5, -38] //расположение точки относительно центра карты(т.к. в данном случае - mymap.getCenter())
    });
    Placemark2 = new ymaps.Placemark(myMap.getCenter(), {
        hintContent: 'Добро пожаловать в Москву',
        balloonContent: 'Кремль'
    }, {
        iconLayout: 'default#image',
        iconImageHref: 'images/myIcon.gif', //ссылка на изображение компании(для маркера)
        iconImageSize: [30, 42],//размер картинки
        iconImageOffset: [-50, -38] //расположение точки относительно центра карты(т.к. в данном случае - mymap.getCenter())
    });
    //добавляем метки на первую карту
    myMap.geoObjects.add(Placemark1);
    myMap.geoObjects.add(Placemark2);
    Moscow_points.push(Placemark1); //добавляем новую точку в коллекцию города, в который хотим их добавить(В данном случае Moscow_points - Москва, может быть SPB_points - Санкт Петербург, или другие города, созданные вами )
    Moscow_points.push(Placemark2);
    var searchControl = new ymaps.control.SearchControl({ //создание поиска на карте
    	options: {
    		provider: 'yandex#search'
    	}
    });
    myMap.controls.add(searchControl);
});
</script>
</html>